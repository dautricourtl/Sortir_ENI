{% extends 'base.html.twig' %}
{% block title %}
    Hello MainController!
        
    
{% endblock %}
{% block body %}
    <h1 class="text-primary">
        Votre profil
                    
            
    </h1>
    <div class="container col-12 m-0 row">
        <div class="gauche col-12 col-md-4">
            <div class="show">
                {# <div class="mt-3"> <img src='{{app.user.photo}}'/></div> #}
                <img class="img-fluid" src="{{ asset('/uploads/images/profilepicture/') }}{{ app.user.photo }}" alt="" />
                <div class="mt-3">
                    Pseudo: 
                                                            
                                        
                    {{ app.user.pseudo }}
                </div>
                <div class="mt-3">
                    Surname: 
                                                            
                                        
                    {{ app.user.surname }}
                </div>
                <div class="mt-3">
                    Name: 
                                                            
                                        
                    {{ app.user.name }}
                </div>
                <div class="mt-3">
                    Tel: 
                                                            
                                        
                    {{ app.user.tel }}
                </div>
                <div class="mt-3">
                    Email: 
                                                            
                                        
                    {{ app.user.mail }}
                </div>
                <a href="{{ path('edit', {id: app.user.id}) }}">
                    <button type="button" class="btn btn-primary mt-3">
                        Edit Profile
                                                                    
                                            
                    </button>
                </a>
            </div>
        </div>
        <div class="droite col-12 col-md-8">
            <!-- LISTE DES SORTIES EFFECTUEES-->
            <div class="sortiesContainer container d-flex flex-row flex--md-col flex-wrap m-0 p-3">
                {% for event in app.user.events %}
                    <div class="sortie_item m-2 col-6 col-md-3 p-2 rounded border">
                        <img src="{{ asset('/uploads/images/event/') }}{{ event.photo }}" class="w-100" alt="miniature sortie" />
                        <div class="p-3 bg-white">
                            <h4 class="text-primary">
                                {{ event.name }}
                            </h4>
                            <div>
                                {{ event.description }}
                            </div>
                            <div>
                                Statut : 
                                                                                                
                                                                
                                {{ event.state.name }}
                            </div>
                            <div>
                                Inscrits : 
                                                                                                
                                                                
                                {{ event.participants | length }}
                                /
                                                                                                
                                                                
                                {{ event.inscriptionMax }}
                            </div>
                        </div>
                        <div class="row">
                            <input type="button" class="btn col-6" onclick="location.href='{{ path('event_detail', {id: event.id}) }}'" value="Détail" />
                            {% if app.user %}
                                {% if event.isActive == false %}
                                    <button class="btn col-6">
                                        {{ event.state.name }}
                                    </button>
                                {% elseif date( event.limitInscriptionAt ) > date() %}
                                    <input type="button" class="btn col-6" onclick="location.href='{{ path('add_participant', {id: event.id}) }}'" value="Se désinscrire" />
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
                {% for event in app.user.organizedEvents %}
                    <div class="sortie_item m-2 col-6 col-md-3 p-2 rounded border">
                        <img src="{{ asset('/uploads/images/event/') }}{{ event.photo }}" class="w-100" alt="miniature sortie" />
                        <div class="p-3 bg-white">
                            <h4 class="text-primary">
                                {{ event.name }}
                            </h4>
                            <div>
                                {{ event.description }}
                            </div>
                            <div>
                                Statut : 
                                                                                                        
                                                                
                                {{ event.state.name }}
                            </div>
                            <div>
                                Inscrits : 
                                                                                                        
                                                                
                                {{ event.participants | length }}
                                /
                                                                                                        
                                                                
                                {{ event.inscriptionMax }}
                            </div>
                        </div>
                        <div class="row">
                            <input type="button" class="btn col-6" onclick="location.href='{{ path('event_detail', {id: event.id}) }}'" value="Détail" />
                            {% if app.user %}
                                {% if date( event.limitInscriptionAt ) > date() %}
                                    {% if event.isActive == true %}
                                        <input type="button" class="btn col-6" onclick="location.href='{{ path('event_cancel', {id: event.id}) }}'" value="Annuler" />
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
